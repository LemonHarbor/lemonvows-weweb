<!-- LemonVows Polls Component -->
<div class="lv-polls">
  <div class="lv-container">
    <!-- Header Section -->
    <div class="lv-polls-header lv-mb-3">
      <div class="lv-card">
        <div class="lv-card-body lv-p-3">
          <div class="lv-row">
            <div class="lv-col lv-col-md-6">
              <h2>Umfragen & Ankündigungen</h2>
              <p>Kommunizieren Sie mit Ihren Gästen und sammeln Sie Feedback</p>
            </div>
            <div class="lv-col lv-col-md-6">
              <div class="lv-stats-container">
                <div class="lv-stat-item">
                  <div class="lv-stat-value">3</div>
                  <div class="lv-stat-label">Umfragen</div>
                </div>
                <div class="lv-stat-item">
                  <div class="lv-stat-value">5</div>
                  <div class="lv-stat-label">Ankündigungen</div>
                </div>
                <div class="lv-stat-item">
                  <div class="lv-stat-value">42</div>
                  <div class="lv-stat-label">Antworten</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tabs -->
    <div class="lv-tabs lv-mb-3">
      <div class="lv-tab-header">
        <button class="lv-tab-btn lv-tab-active" data-tab="announcements">Ankündigungen</button>
        <button class="lv-tab-btn" data-tab="polls">Umfragen</button>
      </div>
    </div>
    
    <!-- Announcements Tab Content -->
    <div class="lv-tab-content lv-tab-content-active" id="announcements-tab">
      <div class="lv-action-bar lv-mb-3">
        <div class="lv-row">
          <div class="lv-col lv-col-md-6">
            <div class="lv-filter-group">
              <button class="lv-filter-btn lv-filter-active" data-filter="all">Alle</button>
              <button class="lv-filter-btn" data-filter="public">Öffentlich</button>
              <button class="lv-filter-btn" data-filter="private">Privat</button>
            </div>
          </div>
          <div class="lv-col lv-col-md-6 lv-text-right">
            <button class="lv-btn lv-btn-primary" id="createAnnouncementBtn">Ankündigung erstellen</button>
          </div>
        </div>
      </div>
      
      <div class="lv-announcements-list">
        <!-- Announcement 1 -->
        <div class="lv-announcement-card" data-announcement-id="1" data-visibility="public">
          <div class="lv-announcement-header">
            <div class="lv-announcement-title">Hochzeitstermin steht fest!</div>
            <div class="lv-announcement-date">15.03.2025</div>
          </div>
          <div class="lv-announcement-body">
            <p>Liebe Freunde und Familie,</p>
            <p>wir freuen uns, euch mitteilen zu können, dass wir den Termin für unsere Hochzeit festgelegt haben. Wir werden am 15.05.2025 im Schloss Elmau heiraten. Bitte haltet euch diesen Tag frei!</p>
            <p>Weitere Informationen folgen in Kürze.</p>
            <p>Liebe Grüße,<br>Anna & Thomas</p>
          </div>
          <div class="lv-announcement-footer">
            <div class="lv-announcement-visibility lv-visibility-public">Öffentlich</div>
            <div class="lv-announcement-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-edit-announcement-btn" data-announcement-id="1">Bearbeiten</button>
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-delete-announcement-btn" data-announcement-id="1">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- Announcement 2 -->
        <div class="lv-announcement-card" data-announcement-id="2" data-visibility="public">
          <div class="lv-announcement-header">
            <div class="lv-announcement-title">Informationen zur Anreise</div>
            <div class="lv-announcement-date">20.03.2025</div>
          </div>
          <div class="lv-announcement-body">
            <p>Liebe Gäste,</p>
            <p>hier findet ihr wichtige Informationen zur Anreise zum Schloss Elmau:</p>
            <ul>
              <li>Adresse: Schloss Elmau, 82493 Krün</li>
              <li>Anreise mit dem Auto: Parkplätze sind vorhanden</li>
              <li>Anreise mit öffentlichen Verkehrsmitteln: Shuttle-Service vom Bahnhof Klais</li>
            </ul>
            <p>Für Übernachtungsmöglichkeiten haben wir ein Kontingent im Schloss und in umliegenden Hotels reserviert. Bitte gebt uns bis zum 01.04.2025 Bescheid, ob ihr eine Unterkunft benötigt.</p>
          </div>
          <div class="lv-announcement-footer">
            <div class="lv-announcement-visibility lv-visibility-public">Öffentlich</div>
            <div class="lv-announcement-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-edit-announcement-btn" data-announcement-id="2">Bearbeiten</button>
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-delete-announcement-btn" data-announcement-id="2">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- Announcement 3 -->
        <div class="lv-announcement-card" data-announcement-id="3" data-visibility="private">
          <div class="lv-announcement-header">
            <div class="lv-announcement-title">Junggesellenabschied - Nur für enge Freunde</div>
            <div class="lv-announcement-date">05.04.2025</div>
          </div>
          <div class="lv-announcement-body">
            <p>Hallo Freunde,</p>
            <p>wir planen einen Junggesellenabschied für Thomas am 01.05.2025. Wir treffen uns um 19:00 Uhr im "Brauhaus am Markt". Bitte haltet euch den Termin frei und gebt mir bis zum 15.04.2025 Bescheid, ob ihr dabei sein könnt.</p>
            <p>Bitte behandelt diese Information vertraulich, es soll eine Überraschung für Thomas sein!</p>
            <p>Viele Grüße,<br>Max (Trauzeuge)</p>
          </div>
          <div class="lv-announcement-footer">
            <div class="lv-announcement-visibility lv-visibility-private">Privat (nur enge Freunde)</div>
            <div class="lv-announcement-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-edit-announcement-btn" data-announcement-id="3">Bearbeiten</button>
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-delete-announcement-btn" data-announcement-id="3">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- More announcements would be added here -->
      </div>
    </div>
    
    <!-- Polls Tab Content -->
    <div class="lv-tab-content" id="polls-tab">
      <div class="lv-action-bar lv-mb-3">
        <div class="lv-row">
          <div class="lv-col lv-col-md-6">
            <div class="lv-filter-group">
              <button class="lv-filter-btn lv-filter-active" data-filter="all">Alle</button>
              <button class="lv-filter-btn" data-filter="active">Aktiv</button>
              <button class="lv-filter-btn" data-filter="closed">Abgeschlossen</button>
            </div>
          </div>
          <div class="lv-col lv-col-md-6 lv-text-right">
            <button class="lv-btn lv-btn-primary" id="createPollBtn">Umfrage erstellen</button>
          </div>
        </div>
      </div>
      
      <div class="lv-polls-list">
        <!-- Poll 1 -->
        <div class="lv-poll-card" data-poll-id="1" data-status="active">
          <div class="lv-poll-header">
            <div class="lv-poll-title">Menüauswahl für das Hochzeitsessen</div>
            <div class="lv-poll-status lv-status-active">Aktiv bis 01.05.2025</div>
          </div>
          <div class="lv-poll-body">
            <div class="lv-poll-description">
              <p>Bitte wählt eure bevorzugte Hauptspeise für das Hochzeitsessen. Vegetarische und vegane Optionen sind verfügbar.</p>
            </div>
            <div class="lv-poll-options">
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll1" id="poll1_option1" value="1">
                  <label for="poll1_option1">Rinderfilet mit Rotweinsoße</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 45%"></div>
                  <div class="lv-poll-option-percentage">45%</div>
                </div>
                <div class="lv-poll-option-count">18 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll1" id="poll1_option2" value="2">
                  <label for="poll1_option2">Lachsfilet mit Zitronenbutter</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 30%"></div>
                  <div class="lv-poll-option-percentage">30%</div>
                </div>
                <div class="lv-poll-option-count">12 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll1" id="poll1_option3" value="3">
                  <label for="poll1_option3">Vegetarische Lasagne</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 15%"></div>
                  <div class="lv-poll-option-percentage">15%</div>
                </div>
                <div class="lv-poll-option-count">6 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll1" id="poll1_option4" value="4">
                  <label for="poll1_option4">Veganes Gemüsecurry</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 10%"></div>
                  <div class="lv-poll-option-percentage">10%</div>
                </div>
                <div class="lv-poll-option-count">4 Stimmen</div>
              </div>
            </div>
            <div class="lv-poll-actions">
              <button class="lv-btn lv-btn-primary" id="votePoll1Btn">Abstimmen</button>
            </div>
          </div>
          <div class="lv-poll-footer">
            <div class="lv-poll-meta">
              <div class="lv-poll-votes">40 Stimmen insgesamt</div>
              <div class="lv-poll-visibility">Alle Gäste</div>
            </div>
            <div class="lv-poll-admin-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-edit-poll-btn" data-poll-id="1">Bearbeiten</button>
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-delete-poll-btn" data-poll-id="1">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- Poll 2 -->
        <div class="lv-poll-card" data-poll-id="2" data-status="active">
          <div class="lv-poll-header">
            <div class="lv-poll-title">Musikwünsche für die Party</div>
            <div class="lv-poll-status lv-status-active">Aktiv bis 01.05.2025</div>
          </div>
          <div class="lv-poll-body">
            <div class="lv-poll-description">
              <p>Welche Musik sollte auf unserer Hochzeitsfeier gespielt werden? Mehrfachauswahl möglich!</p>
            </div>
            <div class="lv-poll-options">
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="checkbox" name="poll2_option1" id="poll2_option1" value="1">
                  <label for="poll2_option1">Aktuelle Charts</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 75%"></div>
                  <div class="lv-poll-option-percentage">75%</div>
                </div>
                <div class="lv-poll-option-count">30 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="checkbox" name="poll2_option2" id="poll2_option2" value="2">
                  <label for="poll2_option2">Klassiker der 80er/90er</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 60%"></div>
                  <div class="lv-poll-option-percentage">60%</div>
                </div>
                <div class="lv-poll-option-count">24 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="checkbox" name="poll2_option3" id="poll2_option3" value="3">
                  <label for="poll2_option3">Rock/Metal</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 35%"></div>
                  <div class="lv-poll-option-percentage">35%</div>
                </div>
                <div class="lv-poll-option-count">14 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="checkbox" name="poll2_option4" id="poll2_option4" value="4">
                  <label for="poll2_option4">Elektronische Musik/Techno</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 45%"></div>
                  <div class="lv-poll-option-percentage">45%</div>
                </div>
                <div class="lv-poll-option-count">18 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="checkbox" name="poll2_option5" id="poll2_option5" value="5">
                  <label for="poll2_option5">Traditionelle Hochzeitsmusik</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 25%"></div>
                  <div class="lv-poll-option-percentage">25%</div>
                </div>
                <div class="lv-poll-option-count">10 Stimmen</div>
              </div>
            </div>
            <div class="lv-poll-actions">
              <button class="lv-btn lv-btn-primary" id="votePoll2Btn">Abstimmen</button>
            </div>
          </div>
          <div class="lv-poll-footer">
            <div class="lv-poll-meta">
              <div class="lv-poll-votes">40 Teilnehmer</div>
              <div class="lv-poll-visibility">Alle Gäste</div>
            </div>
            <div class="lv-poll-admin-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-edit-poll-btn" data-poll-id="2">Bearbeiten</button>
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-delete-poll-btn" data-poll-id="2">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- Poll 3 -->
        <div class="lv-poll-card" data-poll-id="3" data-status="closed">
          <div class="lv-poll-header">
            <div class="lv-poll-title">Datum für den Polterabend</div>
            <div class="lv-poll-status lv-status-closed">Abgeschlossen am 01.03.2025</div>
          </div>
          <div class="lv-poll-body">
            <div class="lv-poll-description">
              <p>Wann soll der Polterabend stattfinden? Bitte wählt das Datum, an dem ihr Zeit habt.</p>
            </div>
            <div class="lv-poll-options">
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll3" id="poll3_option1" value="1" disabled>
                  <label for="poll3_option1">01.05.2025</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 20%"></div>
                  <div class="lv-poll-option-percentage">20%</div>
                </div>
                <div class="lv-poll-option-count">8 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll3" id="poll3_option2" value="2" disabled checked>
                  <label for="poll3_option2">08.05.2025</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress lv-poll-option-winner" style="width: 65%"></div>
                  <div class="lv-poll-option-percentage">65%</div>
                </div>
                <div class="lv-poll-option-count">26 Stimmen</div>
              </div>
              <div class="lv-poll-option">
                <div class="lv-poll-option-label">
                  <input type="radio" name="poll3" id="poll3_option3" value="3" disabled>
                  <label for="poll3_option3">15.05.2025</label>
                </div>
                <div class="lv-poll-option-bar">
                  <div class="lv-poll-option-progress" style="width: 15%"></div>
                  <div class="lv-poll-option-percentage">15%</div>
                </div>
                <div class="lv-poll-option-count">6 Stimmen</div>
              </div>
            </div>
            <div class="lv-poll-result">
              <div class="lv-poll-result-icon">🏆</div>
              <div class="lv-poll-result-text">Gewinner: 08.05.2025</div>
            </div>
          </div>
          <div class="lv-poll-footer">
            <div class="lv-poll-meta">
              <div class="lv-poll-votes">40 Stimmen insgesamt</div>
              <div class="lv-poll-visibility">Alle Gäste</div>
            </div>
            <div class="lv-poll-admin-actions">
              <button class="lv-btn lv-btn-sm lv-btn-outline lv-delete-poll-btn" data-poll-id="3">Löschen</button>
            </div>
          </div>
        </div>
        
        <!-- More polls would be added here -->
      </div>
    </div>
  </div>
</div>

<!-- Create/Edit Announcement Modal -->
<div class="lv-modal" id="announcementModal">
  <div class="lv-modal-dialog lv-modal-lg">
    <div class="lv-modal-content">
      <div class="lv-modal-header">
        <h3 id="announcementModalTitle">Ankündigung erstellen</h3>
        <button class="lv-modal-close">&times;</button>
      </div>
      <div class="lv-modal-body">
        <form id="announcementForm">
          <input type="hidden" id="announcementId" value="">
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="announcementTitle">Titel*</label>
            <input type="text" class="lv-form-control" id="announcementTitle" required placeholder="Titel der Ankündigung">
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="announcementContent">Inhalt*</label>
            <textarea class="lv-form-control" id="announcementContent" rows="6" required placeholder="Inhalt der Ankündigung"></textarea>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Sichtbarkeit</label>
            <div class="lv-radio-group">
              <div class="lv-radio">
                <input type="radio" id="visibilityPublic" name="announcementVisibility" value="public" checked>
                <label for="visibilityPublic">Öffentlich (für alle Gäste sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="visibilityFamily" name="announcementVisibility" value="family">
                <label for="visibilityFamily">Familie (nur für Familienmitglieder sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="visibilityFriends" name="announcementVisibility" value="friends">
                <label for="visibilityFriends">Freunde (nur für Freunde sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="visibilityPrivate" name="announcementVisibility" value="private">
                <label for="visibilityPrivate">Privat (nur für ausgewählte Gäste sichtbar)</label>
              </div>
            </div>
          </div>
          
          <div class="lv-form-group" id="selectedGuestsGroup" style="display: none;">
            <label class="lv-form-label">Ausgewählte Gäste</label>
            <div class="lv-guest-selector">
              <div class="lv-guest-search">
                <input type="text" class="lv-form-control" id="guestSearch" placeholder="Gäste suchen...">
              </div>
              <div class="lv-guest-list" id="guestList">
                <div class="lv-guest-item">
                  <input type="checkbox" id="guest1" value="1">
                  <label for="guest1">Max Mustermann</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="guest2" value="2">
                  <label for="guest2">Maria Musterfrau</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="guest3" value="3">
                  <label for="guest3">Peter Schmidt</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="guest4" value="4">
                  <label for="guest4">Julia Weber</label>
                </div>
                <!-- More guests would be added here -->
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="lv-modal-footer">
        <button class="lv-btn lv-btn-outline lv-modal-cancel">Abbrechen</button>
        <button class="lv-btn lv-btn-primary" id="saveAnnouncementBtn">Speichern</button>
      </div>
    </div>
  </div>
</div>

<!-- Create/Edit Poll Modal -->
<div class="lv-modal" id="pollModal">
  <div class="lv-modal-dialog lv-modal-lg">
    <div class="lv-modal-content">
      <div class="lv-modal-header">
        <h3 id="pollModalTitle">Umfrage erstellen</h3>
        <button class="lv-modal-close">&times;</button>
      </div>
      <div class="lv-modal-body">
        <form id="pollForm">
          <input type="hidden" id="pollId" value="">
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="pollTitle">Titel*</label>
            <input type="text" class="lv-form-control" id="pollTitle" required placeholder="Titel der Umfrage">
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="pollDescription">Beschreibung</label>
            <textarea class="lv-form-control" id="pollDescription" rows="3" placeholder="Beschreibung der Umfrage (optional)"></textarea>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Umfragetyp</label>
            <div class="lv-radio-group">
              <div class="lv-radio">
                <input type="radio" id="pollTypeSingle" name="pollType" value="single" checked>
                <label for="pollTypeSingle">Einzelauswahl (Teilnehmer können nur eine Option wählen)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="pollTypeMultiple" name="pollType" value="multiple">
                <label for="pollTypeMultiple">Mehrfachauswahl (Teilnehmer können mehrere Optionen wählen)</label>
              </div>
            </div>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Optionen*</label>
            <div class="lv-poll-options-editor" id="pollOptionsEditor">
              <div class="lv-poll-option-editor">
                <input type="text" class="lv-form-control" placeholder="Option 1" required>
                <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn" disabled>-</button>
              </div>
              <div class="lv-poll-option-editor">
                <input type="text" class="lv-form-control" placeholder="Option 2" required>
                <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn" disabled>-</button>
              </div>
              <div class="lv-poll-option-editor">
                <input type="text" class="lv-form-control" placeholder="Option 3" required>
                <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn">-</button>
              </div>
            </div>
            <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-add-option-btn">+ Option hinzufügen</button>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="pollEndDate">Enddatum</label>
            <input type="date" class="lv-form-control" id="pollEndDate">
            <small class="lv-form-text">Lassen Sie das Feld leer, wenn die Umfrage kein Enddatum haben soll.</small>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Sichtbarkeit</label>
            <div class="lv-radio-group">
              <div class="lv-radio">
                <input type="radio" id="pollVisibilityPublic" name="pollVisibility" value="public" checked>
                <label for="pollVisibilityPublic">Öffentlich (für alle Gäste sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="pollVisibilityFamily" name="pollVisibility" value="family">
                <label for="pollVisibilityFamily">Familie (nur für Familienmitglieder sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="pollVisibilityFriends" name="pollVisibility" value="friends">
                <label for="pollVisibilityFriends">Freunde (nur für Freunde sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="pollVisibilityPrivate" name="pollVisibility" value="private">
                <label for="pollVisibilityPrivate">Privat (nur für ausgewählte Gäste sichtbar)</label>
              </div>
            </div>
          </div>
          
          <div class="lv-form-group" id="pollSelectedGuestsGroup" style="display: none;">
            <label class="lv-form-label">Ausgewählte Gäste</label>
            <div class="lv-guest-selector">
              <div class="lv-guest-search">
                <input type="text" class="lv-form-control" id="pollGuestSearch" placeholder="Gäste suchen...">
              </div>
              <div class="lv-guest-list" id="pollGuestList">
                <div class="lv-guest-item">
                  <input type="checkbox" id="pollGuest1" value="1">
                  <label for="pollGuest1">Max Mustermann</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="pollGuest2" value="2">
                  <label for="pollGuest2">Maria Musterfrau</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="pollGuest3" value="3">
                  <label for="pollGuest3">Peter Schmidt</label>
                </div>
                <div class="lv-guest-item">
                  <input type="checkbox" id="pollGuest4" value="4">
                  <label for="pollGuest4">Julia Weber</label>
                </div>
                <!-- More guests would be added here -->
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="lv-modal-footer">
        <button class="lv-btn lv-btn-outline lv-modal-cancel">Abbrechen</button>
        <button class="lv-btn lv-btn-primary" id="savePollBtn">Speichern</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const tabBtns = document.querySelectorAll('.lv-tab-btn');
    const tabContents = document.querySelectorAll('.lv-tab-content');
    const filterBtns = document.querySelectorAll('.lv-filter-btn');
    const createAnnouncementBtn = document.getElementById('createAnnouncementBtn');
    const createPollBtn = document.getElementById('createPollBtn');
    const announcementCards = document.querySelectorAll('.lv-announcement-card');
    const pollCards = document.querySelectorAll('.lv-poll-card');
    const editAnnouncementBtns = document.querySelectorAll('.lv-edit-announcement-btn');
    const deleteAnnouncementBtns = document.querySelectorAll('.lv-delete-announcement-btn');
    const editPollBtns = document.querySelectorAll('.lv-edit-poll-btn');
    const deletePollBtns = document.querySelectorAll('.lv-delete-poll-btn');
    const announcementModal = document.getElementById('announcementModal');
    const pollModal = document.getElementById('pollModal');
    const announcementForm = document.getElementById('announcementForm');
    const pollForm = document.getElementById('pollForm');
    const saveAnnouncementBtn = document.getElementById('saveAnnouncementBtn');
    const savePollBtn = document.getElementById('savePollBtn');
    const addOptionBtn = document.querySelector('.lv-add-option-btn');
    const removeOptionBtns = document.querySelectorAll('.lv-remove-option-btn');
    const modalCloseButtons = document.querySelectorAll('.lv-modal-close, .lv-modal-cancel');
    const visibilityRadios = document.querySelectorAll('input[name="announcementVisibility"]');
    const pollVisibilityRadios = document.querySelectorAll('input[name="pollVisibility"]');
    const selectedGuestsGroup = document.getElementById('selectedGuestsGroup');
    const pollSelectedGuestsGroup = document.getElementById('pollSelectedGuestsGroup');
    
    // Initialize
    initTabs();
    initFilters();
    initButtons();
    initModals();
    initVisibilityControls();
    initPollOptions();
    
    // Functions
    function initTabs() {
      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          // Remove active class from all buttons and contents
          tabBtns.forEach(b => b.classList.remove('lv-tab-active'));
          tabContents.forEach(c => c.classList.remove('lv-tab-content-active'));
          
          // Add active class to clicked button and corresponding content
          this.classList.add('lv-tab-active');
          const tabId = this.getAttribute('data-tab');
          document.getElementById(`${tabId}-tab`).classList.add('lv-tab-content-active');
        });
      });
    }
    
    function initFilters() {
      filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          // Get parent filter group
          const filterGroup = this.closest('.lv-filter-group');
          
          // Remove active class from all buttons in this group
          filterGroup.querySelectorAll('.lv-filter-btn').forEach(b => b.classList.remove('lv-filter-active'));
          
          // Add active class to clicked button
          this.classList.add('lv-filter-active');
          
          // Apply filter
          const filter = this.getAttribute('data-filter');
          const tabContent = this.closest('.lv-tab-content');
          
          if (tabContent.id === 'announcements-tab') {
            filterAnnouncements(filter);
          } else if (tabContent.id === 'polls-tab') {
            filterPolls(filter);
          }
        });
      });
    }
    
    function filterAnnouncements(filter) {
      announcementCards.forEach(card => {
        const visibility = card.getAttribute('data-visibility');
        
        if (filter === 'all' || visibility === filter) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    function filterPolls(filter) {
      pollCards.forEach(card => {
        const status = card.getAttribute('data-status');
        
        if (filter === 'all' || status === filter) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    function initButtons() {
      // Create announcement button
      if (createAnnouncementBtn) {
        createAnnouncementBtn.addEventListener('click', function() {
          openAnnouncementModal();
        });
      }
      
      // Create poll button
      if (createPollBtn) {
        createPollBtn.addEventListener('click', function() {
          openPollModal();
        });
      }
      
      // Edit announcement buttons
      editAnnouncementBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const announcementId = this.getAttribute('data-announcement-id');
          openAnnouncementModal(announcementId);
        });
      });
      
      // Delete announcement buttons
      deleteAnnouncementBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const announcementId = this.getAttribute('data-announcement-id');
          if (confirm('Sind Sie sicher, dass Sie diese Ankündigung löschen möchten?')) {
            deleteAnnouncement(announcementId);
          }
        });
      });
      
      // Edit poll buttons
      editPollBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const pollId = this.getAttribute('data-poll-id');
          openPollModal(pollId);
        });
      });
      
      // Delete poll buttons
      deletePollBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const pollId = this.getAttribute('data-poll-id');
          if (confirm('Sind Sie sicher, dass Sie diese Umfrage löschen möchten?')) {
            deletePoll(pollId);
          }
        });
      });
      
      // Vote buttons
      const votePoll1Btn = document.getElementById('votePoll1Btn');
      if (votePoll1Btn) {
        votePoll1Btn.addEventListener('click', function() {
          const selectedOption = document.querySelector('input[name="poll1"]:checked');
          if (selectedOption) {
            votePoll(1, selectedOption.value);
          } else {
            alert('Bitte wählen Sie eine Option aus.');
          }
        });
      }
      
      const votePoll2Btn = document.getElementById('votePoll2Btn');
      if (votePoll2Btn) {
        votePoll2Btn.addEventListener('click', function() {
          const selectedOptions = Array.from(document.querySelectorAll('input[name^="poll2_option"]:checked')).map(input => input.value);
          if (selectedOptions.length > 0) {
            votePoll(2, selectedOptions);
          } else {
            alert('Bitte wählen Sie mindestens eine Option aus.');
          }
        });
      }
    }
    
    function initModals() {
      // Close modals
      modalCloseButtons.forEach(button => {
        button.addEventListener('click', function() {
          closeAllModals();
        });
      });
      
      // Save announcement button
      if (saveAnnouncementBtn) {
        saveAnnouncementBtn.addEventListener('click', function() {
          saveAnnouncement();
        });
      }
      
      // Save poll button
      if (savePollBtn) {
        savePollBtn.addEventListener('click', function() {
          savePoll();
        });
      }
    }
    
    function initVisibilityControls() {
      // Announcement visibility
      visibilityRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'private') {
            selectedGuestsGroup.style.display = '';
          } else {
            selectedGuestsGroup.style.display = 'none';
          }
        });
      });
      
      // Poll visibility
      pollVisibilityRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'private') {
            pollSelectedGuestsGroup.style.display = '';
          } else {
            pollSelectedGuestsGroup.style.display = 'none';
          }
        });
      });
    }
    
    function initPollOptions() {
      // Add option button
      if (addOptionBtn) {
        addOptionBtn.addEventListener('click', function() {
          const optionsEditor = document.getElementById('pollOptionsEditor');
          const optionCount = optionsEditor.children.length;
          
          const newOption = document.createElement('div');
          newOption.className = 'lv-poll-option-editor';
          newOption.innerHTML = `
            <input type="text" class="lv-form-control" placeholder="Option ${optionCount + 1}" required>
            <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn">-</button>
          `;
          
          optionsEditor.appendChild(newOption);
          
          // Enable all remove buttons if we have more than 2 options
          if (optionCount + 1 > 2) {
            document.querySelectorAll('.lv-remove-option-btn').forEach(btn => {
              btn.disabled = false;
            });
          }
          
          // Add event listener to new remove button
          newOption.querySelector('.lv-remove-option-btn').addEventListener('click', function() {
            removeOption(this);
          });
        });
      }
      
      // Remove option buttons
      removeOptionBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          removeOption(this);
        });
      });
    }
    
    function removeOption(button) {
      const optionsEditor = document.getElementById('pollOptionsEditor');
      const optionCount = optionsEditor.children.length;
      
      if (optionCount > 2) {
        button.closest('.lv-poll-option-editor').remove();
        
        // Disable all remove buttons if we have only 2 options left
        if (optionCount - 1 <= 2) {
          document.querySelectorAll('.lv-remove-option-btn').forEach(btn => {
            btn.disabled = true;
          });
        }
        
        // Update placeholders
        document.querySelectorAll('#pollOptionsEditor .lv-poll-option-editor input').forEach((input, index) => {
          input.placeholder = `Option ${index + 1}`;
        });
      }
    }
    
    function openAnnouncementModal(announcementId = null) {
      // Reset form
      announcementForm.reset();
      document.getElementById('announcementId').value = '';
      document.getElementById('announcementModalTitle').textContent = 'Ankündigung erstellen';
      selectedGuestsGroup.style.display = 'none';
      
      if (announcementId) {
        // Edit mode - populate form with announcement data
        document.getElementById('announcementModalTitle').textContent = 'Ankündigung bearbeiten';
        document.getElementById('announcementId').value = announcementId;
        
        // Here you would typically fetch the announcement data from your database
        // For now, we'll just simulate it with some dummy data based on the ID
        populateAnnouncementForm(announcementId);
      }
      
      announcementModal.classList.add('lv-modal-open');
    }
    
    function openPollModal(pollId = null) {
      // Reset form
      pollForm.reset();
      document.getElementById('pollId').value = '';
      document.getElementById('pollModalTitle').textContent = 'Umfrage erstellen';
      pollSelectedGuestsGroup.style.display = 'none';
      
      // Reset options
      const optionsEditor = document.getElementById('pollOptionsEditor');
      optionsEditor.innerHTML = `
        <div class="lv-poll-option-editor">
          <input type="text" class="lv-form-control" placeholder="Option 1" required>
          <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn" disabled>-</button>
        </div>
        <div class="lv-poll-option-editor">
          <input type="text" class="lv-form-control" placeholder="Option 2" required>
          <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn" disabled>-</button>
        </div>
      `;
      
      if (pollId) {
        // Edit mode - populate form with poll data
        document.getElementById('pollModalTitle').textContent = 'Umfrage bearbeiten';
        document.getElementById('pollId').value = pollId;
        
        // Here you would typically fetch the poll data from your database
        // For now, we'll just simulate it with some dummy data based on the ID
        populatePollForm(pollId);
      }
      
      // Add event listeners to remove buttons
      document.querySelectorAll('.lv-remove-option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          removeOption(this);
        });
      });
      
      pollModal.classList.add('lv-modal-open');
    }
    
    function closeAllModals() {
      announcementModal.classList.remove('lv-modal-open');
      pollModal.classList.remove('lv-modal-open');
    }
    
    function populateAnnouncementForm(announcementId) {
      // This is a simulation - in a real app, you would fetch this data from your database
      const announcementData = {
        '1': {
          title: 'Hochzeitstermin steht fest!',
          content: 'Liebe Freunde und Familie,\n\nwir freuen uns, euch mitteilen zu können, dass wir den Termin für unsere Hochzeit festgelegt haben. Wir werden am 15.05.2025 im Schloss Elmau heiraten. Bitte haltet euch diesen Tag frei!\n\nWeitere Informationen folgen in Kürze.\n\nLiebe Grüße,\nAnna & Thomas',
          visibility: 'public'
        },
        '2': {
          title: 'Informationen zur Anreise',
          content: 'Liebe Gäste,\n\nhier findet ihr wichtige Informationen zur Anreise zum Schloss Elmau:\n\n- Adresse: Schloss Elmau, 82493 Krün\n- Anreise mit dem Auto: Parkplätze sind vorhanden\n- Anreise mit öffentlichen Verkehrsmitteln: Shuttle-Service vom Bahnhof Klais\n\nFür Übernachtungsmöglichkeiten haben wir ein Kontingent im Schloss und in umliegenden Hotels reserviert. Bitte gebt uns bis zum 01.04.2025 Bescheid, ob ihr eine Unterkunft benötigt.',
          visibility: 'public'
        },
        '3': {
          title: 'Junggesellenabschied - Nur für enge Freunde',
          content: 'Hallo Freunde,\n\nwir planen einen Junggesellenabschied für Thomas am 01.05.2025. Wir treffen uns um 19:00 Uhr im "Brauhaus am Markt". Bitte haltet euch den Termin frei und gebt mir bis zum 15.04.2025 Bescheid, ob ihr dabei sein könnt.\n\nBitte behandelt diese Information vertraulich, es soll eine Überraschung für Thomas sein!\n\nViele Grüße,\nMax (Trauzeuge)',
          visibility: 'private',
          selectedGuests: [1, 2, 3]
        }
      };
      
      const announcement = announcementData[announcementId];
      if (announcement) {
        document.getElementById('announcementTitle').value = announcement.title;
        document.getElementById('announcementContent').value = announcement.content;
        document.querySelector(`input[name="announcementVisibility"][value="${announcement.visibility}"]`).checked = true;
        
        if (announcement.visibility === 'private') {
          selectedGuestsGroup.style.display = '';
          
          // Check selected guests
          if (announcement.selectedGuests) {
            announcement.selectedGuests.forEach(guestId => {
              const checkbox = document.getElementById(`guest${guestId}`);
              if (checkbox) {
                checkbox.checked = true;
              }
            });
          }
        }
      }
    }
    
    function populatePollForm(pollId) {
      // This is a simulation - in a real app, you would fetch this data from your database
      const pollData = {
        '1': {
          title: 'Menüauswahl für das Hochzeitsessen',
          description: 'Bitte wählt eure bevorzugte Hauptspeise für das Hochzeitsessen. Vegetarische und vegane Optionen sind verfügbar.',
          type: 'single',
          options: [
            'Rinderfilet mit Rotweinsoße',
            'Lachsfilet mit Zitronenbutter',
            'Vegetarische Lasagne',
            'Veganes Gemüsecurry'
          ],
          endDate: '2025-05-01',
          visibility: 'public'
        },
        '2': {
          title: 'Musikwünsche für die Party',
          description: 'Welche Musik sollte auf unserer Hochzeitsfeier gespielt werden? Mehrfachauswahl möglich!',
          type: 'multiple',
          options: [
            'Aktuelle Charts',
            'Klassiker der 80er/90er',
            'Rock/Metal',
            'Elektronische Musik/Techno',
            'Traditionelle Hochzeitsmusik'
          ],
          endDate: '2025-05-01',
          visibility: 'public'
        }
      };
      
      const poll = pollData[pollId];
      if (poll) {
        document.getElementById('pollTitle').value = poll.title;
        document.getElementById('pollDescription').value = poll.description;
        document.querySelector(`input[name="pollType"][value="${poll.type}"]`).checked = true;
        document.getElementById('pollEndDate').value = poll.endDate;
        document.querySelector(`input[name="pollVisibility"][value="${poll.visibility}"]`).checked = true;
        
        // Set options
        const optionsEditor = document.getElementById('pollOptionsEditor');
        optionsEditor.innerHTML = '';
        
        poll.options.forEach((option, index) => {
          const disabled = poll.options.length <= 2 ? 'disabled' : '';
          
          const optionElement = document.createElement('div');
          optionElement.className = 'lv-poll-option-editor';
          optionElement.innerHTML = `
            <input type="text" class="lv-form-control" placeholder="Option ${index + 1}" value="${option}" required>
            <button type="button" class="lv-btn lv-btn-sm lv-btn-outline lv-btn-danger lv-remove-option-btn" ${disabled}>-</button>
          `;
          
          optionsEditor.appendChild(optionElement);
        });
        
        // Add event listeners to remove buttons
        document.querySelectorAll('.lv-remove-option-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            removeOption(this);
          });
        });
        
        if (poll.visibility === 'private') {
          pollSelectedGuestsGroup.style.display = '';
          
          // Check selected guests
          if (poll.selectedGuests) {
            poll.selectedGuests.forEach(guestId => {
              const checkbox = document.getElementById(`pollGuest${guestId}`);
              if (checkbox) {
                checkbox.checked = true;
              }
            });
          }
        }
      }
    }
    
    function saveAnnouncement() {
      // Get form values
      const announcementId = document.getElementById('announcementId').value;
      const title = document.getElementById('announcementTitle').value;
      const content = document.getElementById('announcementContent').value;
      
      // Validate required fields
      if (!title || !content) {
        alert('Bitte füllen Sie alle Pflichtfelder aus.');
        return;
      }
      
      // Here you would typically save the announcement data to your database
      // For now, we'll just close the modal and simulate a success message
      closeAllModals();
      
      // Show success message
      const message = announcementId ? 'Ankündigung erfolgreich aktualisiert.' : 'Ankündigung erfolgreich erstellt.';
      showNotification(message, 'success');
      
      // In a real app, you would refresh the announcement list or update the specific card
    }
    
    function savePoll() {
      // Get form values
      const pollId = document.getElementById('pollId').value;
      const title = document.getElementById('pollTitle').value;
      
      // Get options
      const options = [];
      document.querySelectorAll('#pollOptionsEditor input').forEach(input => {
        options.push(input.value);
      });
      
      // Validate required fields
      if (!title) {
        alert('Bitte geben Sie einen Titel ein.');
        return;
      }
      
      if (options.some(option => !option)) {
        alert('Bitte füllen Sie alle Optionen aus.');
        return;
      }
      
      // Here you would typically save the poll data to your database
      // For now, we'll just close the modal and simulate a success message
      closeAllModals();
      
      // Show success message
      const message = pollId ? 'Umfrage erfolgreich aktualisiert.' : 'Umfrage erfolgreich erstellt.';
      showNotification(message, 'success');
      
      // In a real app, you would refresh the poll list or update the specific card
    }
    
    function deleteAnnouncement(announcementId) {
      // Here you would typically delete the announcement from your database
      // For now, we'll just simulate a success message
      
      // Show success message
      showNotification('Ankündigung erfolgreich gelöscht.', 'success');
      
      // In a real app, you would remove the announcement card from the list
      const announcementCard = document.querySelector(`.lv-announcement-card[data-announcement-id="${announcementId}"]`);
      if (announcementCard) {
        announcementCard.remove();
      }
    }
    
    function deletePoll(pollId) {
      // Here you would typically delete the poll from your database
      // For now, we'll just simulate a success message
      
      // Show success message
      showNotification('Umfrage erfolgreich gelöscht.', 'success');
      
      // In a real app, you would remove the poll card from the list
      const pollCard = document.querySelector(`.lv-poll-card[data-poll-id="${pollId}"]`);
      if (pollCard) {
        pollCard.remove();
      }
    }
    
    function votePoll(pollId, optionId) {
      // Here you would typically save the vote to your database
      // For now, we'll just simulate a success message
      
      // Show success message
      showNotification('Ihre Stimme wurde erfolgreich gespeichert.', 'success');
      
      // In a real app, you would update the poll results
    }
    
    function showNotification(message, type) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `lv-notification lv-notification-${type}`;
      notification.textContent = message;
      
      // Add to document
      document.body.appendChild(notification);
      
      // Show notification
      setTimeout(() => {
        notification.classList.add('lv-notification-show');
      }, 10);
      
      // Hide and remove after 3 seconds
      setTimeout(() => {
        notification.classList.remove('lv-notification-show');
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }
  });
</script>
