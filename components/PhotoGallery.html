<!-- LemonVows PhotoGallery Component -->
<div class="lv-photo-gallery">
  <div class="lv-container">
    <!-- Header Section -->
    <div class="lv-gallery-header lv-mb-3">
      <div class="lv-card">
        <div class="lv-card-body lv-p-3">
          <div class="lv-row">
            <div class="lv-col lv-col-md-6">
              <h2>Fotogalerie</h2>
              <p>Verwalten und teilen Sie Ihre Hochzeitsfotos</p>
            </div>
            <div class="lv-col lv-col-md-6">
              <div class="lv-stats-container">
                <div class="lv-stat-item">
                  <div class="lv-stat-value">5</div>
                  <div class="lv-stat-label">Alben</div>
                </div>
                <div class="lv-stat-item">
                  <div class="lv-stat-value">128</div>
                  <div class="lv-stat-label">Fotos</div>
                </div>
                <div class="lv-stat-item">
                  <div class="lv-stat-value">3</div>
                  <div class="lv-stat-label">Geteilt</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Action Bar -->
    <div class="lv-action-bar lv-mb-3">
      <div class="lv-row">
        <div class="lv-col lv-col-md-6">
          <div class="lv-filter-group">
            <button class="lv-filter-btn lv-filter-active" data-filter="all">Alle Alben</button>
            <button class="lv-filter-btn" data-filter="shared">Geteilte Alben</button>
            <button class="lv-filter-btn" data-filter="private">Private Alben</button>
          </div>
        </div>
        <div class="lv-col lv-col-md-6 lv-text-right">
          <div class="lv-search-container lv-mb-2">
            <input type="text" class="lv-search-input" id="albumSearch" placeholder="Alben durchsuchen...">
          </div>
          <button class="lv-btn lv-btn-primary" id="createAlbumBtn">Album erstellen</button>
        </div>
      </div>
    </div>
    
    <!-- Albums Grid -->
    <div class="lv-albums-grid">
      <!-- Engagement Album -->
      <div class="lv-album-card" data-album-id="1" data-status="shared">
        <div class="lv-album-cover">
          <img src="https://source.unsplash.com/random/300x200/?engagement" alt="Verlobungsfotos" class="lv-album-img">
          <div class="lv-album-overlay">
            <div class="lv-album-actions">
              <button class="lv-btn lv-btn-sm lv-btn-light lv-view-album-btn" data-album-id="1">√ñffnen</button>
              <button class="lv-btn lv-btn-sm lv-btn-light lv-edit-album-btn" data-album-id="1">Bearbeiten</button>
            </div>
          </div>
          <div class="lv-album-status lv-status-shared">Geteilt</div>
        </div>
        <div class="lv-album-info">
          <h3 class="lv-album-title">Verlobungsfotos</h3>
          <div class="lv-album-meta">
            <span class="lv-album-count">24 Fotos</span>
            <span class="lv-album-date">01.10.2024</span>
          </div>
        </div>
      </div>
      
      <!-- Pre-Wedding Album -->
      <div class="lv-album-card" data-album-id="2" data-status="shared">
        <div class="lv-album-cover">
          <img src="https://source.unsplash.com/random/300x200/?prewedding" alt="Pre-Wedding Shooting" class="lv-album-img">
          <div class="lv-album-overlay">
            <div class="lv-album-actions">
              <button class="lv-btn lv-btn-sm lv-btn-light lv-view-album-btn" data-album-id="2">√ñffnen</button>
              <button class="lv-btn lv-btn-sm lv-btn-light lv-edit-album-btn" data-album-id="2">Bearbeiten</button>
            </div>
          </div>
          <div class="lv-album-status lv-status-shared">Geteilt</div>
        </div>
        <div class="lv-album-info">
          <h3 class="lv-album-title">Pre-Wedding Shooting</h3>
          <div class="lv-album-meta">
            <span class="lv-album-count">36 Fotos</span>
            <span class="lv-album-date">15.03.2025</span>
          </div>
        </div>
      </div>
      
      <!-- Location Album -->
      <div class="lv-album-card" data-album-id="3" data-status="private">
        <div class="lv-album-cover">
          <img src="https://source.unsplash.com/random/300x200/?venue" alt="Location Besichtigung" class="lv-album-img">
          <div class="lv-album-overlay">
            <div class="lv-album-actions">
              <button class="lv-btn lv-btn-sm lv-btn-light lv-view-album-btn" data-album-id="3">√ñffnen</button>
              <button class="lv-btn lv-btn-sm lv-btn-light lv-edit-album-btn" data-album-id="3">Bearbeiten</button>
            </div>
          </div>
          <div class="lv-album-status lv-status-private">Privat</div>
        </div>
        <div class="lv-album-info">
          <h3 class="lv-album-title">Location Besichtigung</h3>
          <div class="lv-album-meta">
            <span class="lv-album-count">18 Fotos</span>
            <span class="lv-album-date">20.08.2024</span>
          </div>
        </div>
      </div>
      
      <!-- Wedding Day Album -->
      <div class="lv-album-card" data-album-id="4" data-status="shared">
        <div class="lv-album-cover">
          <img src="https://source.unsplash.com/random/300x200/?wedding" alt="Hochzeitstag" class="lv-album-img">
          <div class="lv-album-overlay">
            <div class="lv-album-actions">
              <button class="lv-btn lv-btn-sm lv-btn-light lv-view-album-btn" data-album-id="4">√ñffnen</button>
              <button class="lv-btn lv-btn-sm lv-btn-light lv-edit-album-btn" data-album-id="4">Bearbeiten</button>
            </div>
          </div>
          <div class="lv-album-status lv-status-shared">Geteilt</div>
        </div>
        <div class="lv-album-info">
          <h3 class="lv-album-title">Hochzeitstag</h3>
          <div class="lv-album-meta">
            <span class="lv-album-count">42 Fotos</span>
            <span class="lv-album-date">15.05.2025</span>
          </div>
        </div>
      </div>
      
      <!-- Honeymoon Album -->
      <div class="lv-album-card" data-album-id="5" data-status="private">
        <div class="lv-album-cover">
          <img src="https://source.unsplash.com/random/300x200/?honeymoon" alt="Flitterwochen" class="lv-album-img">
          <div class="lv-album-overlay">
            <div class="lv-album-actions">
              <button class="lv-btn lv-btn-sm lv-btn-light lv-view-album-btn" data-album-id="5">√ñffnen</button>
              <button class="lv-btn lv-btn-sm lv-btn-light lv-edit-album-btn" data-album-id="5">Bearbeiten</button>
            </div>
          </div>
          <div class="lv-album-status lv-status-private">Privat</div>
        </div>
        <div class="lv-album-info">
          <h3 class="lv-album-title">Flitterwochen</h3>
          <div class="lv-album-meta">
            <span class="lv-album-count">8 Fotos</span>
            <span class="lv-album-date">01.06.2025</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Album Viewer Modal -->
<div class="lv-modal" id="albumViewerModal">
  <div class="lv-modal-dialog lv-modal-xl">
    <div class="lv-modal-content">
      <div class="lv-modal-header">
        <h3 id="albumViewerTitle">Verlobungsfotos</h3>
        <button class="lv-modal-close">&times;</button>
      </div>
      <div class="lv-modal-body lv-p-0">
        <div class="lv-photo-viewer">
          <div class="lv-photo-main">
            <div class="lv-photo-container">
              <img src="https://source.unsplash.com/random/800x600/?engagement" alt="Foto" id="currentPhoto" class="lv-photo-img">
              <div class="lv-photo-nav">
                <button class="lv-photo-nav-btn lv-photo-prev" id="prevPhotoBtn">&lt;</button>
                <button class="lv-photo-nav-btn lv-photo-next" id="nextPhotoBtn">&gt;</button>
              </div>
            </div>
            <div class="lv-photo-info lv-p-3">
              <div class="lv-photo-caption" id="photoCaption">Verlobungsfotos im Park</div>
              <div class="lv-photo-meta">
                <span class="lv-photo-date" id="photoDate">01.10.2024</span>
                <span class="lv-photo-index" id="photoIndex">1 von 24</span>
              </div>
            </div>
          </div>
          <div class="lv-photo-thumbnails lv-p-2">
            <div class="lv-thumbnails-container" id="thumbnailsContainer">
              <!-- Thumbnails will be generated dynamically -->
              <div class="lv-thumbnail lv-thumbnail-active" data-photo-id="1">
                <img src="https://source.unsplash.com/random/100x100/?engagement,1" alt="Thumbnail 1" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="2">
                <img src="https://source.unsplash.com/random/100x100/?engagement,2" alt="Thumbnail 2" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="3">
                <img src="https://source.unsplash.com/random/100x100/?engagement,3" alt="Thumbnail 3" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="4">
                <img src="https://source.unsplash.com/random/100x100/?engagement,4" alt="Thumbnail 4" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="5">
                <img src="https://source.unsplash.com/random/100x100/?engagement,5" alt="Thumbnail 5" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="6">
                <img src="https://source.unsplash.com/random/100x100/?engagement,6" alt="Thumbnail 6" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="7">
                <img src="https://source.unsplash.com/random/100x100/?engagement,7" alt="Thumbnail 7" class="lv-thumbnail-img">
              </div>
              <div class="lv-thumbnail" data-photo-id="8">
                <img src="https://source.unsplash.com/random/100x100/?engagement,8" alt="Thumbnail 8" class="lv-thumbnail-img">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="lv-modal-footer">
        <div class="lv-photo-actions">
          <button class="lv-btn lv-btn-outline" id="downloadPhotoBtn">Herunterladen</button>
          <button class="lv-btn lv-btn-outline" id="sharePhotoBtn">Teilen</button>
          <button class="lv-btn lv-btn-outline lv-btn-danger" id="deletePhotoBtn">L√∂schen</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Create/Edit Album Modal -->
<div class="lv-modal" id="albumModal">
  <div class="lv-modal-dialog lv-modal-lg">
    <div class="lv-modal-content">
      <div class="lv-modal-header">
        <h3 id="albumModalTitle">Album erstellen</h3>
        <button class="lv-modal-close">&times;</button>
      </div>
      <div class="lv-modal-body">
        <form id="albumForm">
          <input type="hidden" id="albumId" value="">
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="albumTitle">Albumtitel*</label>
            <input type="text" class="lv-form-control" id="albumTitle" required placeholder="Geben Sie einen Titel f√ºr das Album ein">
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="albumDescription">Beschreibung</label>
            <textarea class="lv-form-control" id="albumDescription" rows="3" placeholder="Beschreiben Sie das Album (optional)"></textarea>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label" for="albumDate">Datum</label>
            <input type="date" class="lv-form-control" id="albumDate">
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Privatsph√§re</label>
            <div class="lv-radio-group">
              <div class="lv-radio">
                <input type="radio" id="privacyPrivate" name="albumPrivacy" value="private" checked>
                <label for="privacyPrivate">Privat (nur f√ºr Sie sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="privacyShared" name="albumPrivacy" value="shared">
                <label for="privacyShared">Geteilt (f√ºr G√§ste mit Link sichtbar)</label>
              </div>
              <div class="lv-radio">
                <input type="radio" id="privacyPublic" name="albumPrivacy" value="public">
                <label for="privacyPublic">√ñffentlich (f√ºr alle G√§ste sichtbar)</label>
              </div>
            </div>
          </div>
          
          <div class="lv-form-group">
            <label class="lv-form-label">Fotos hochladen</label>
            <div class="lv-upload-container" id="photoUploadContainer">
              <div class="lv-upload-dropzone" id="photoDropzone">
                <div class="lv-upload-icon">üì∑</div>
                <div class="lv-upload-text">Fotos hierher ziehen oder klicken zum Ausw√§hlen</div>
                <input type="file" id="photoUpload" multiple accept="image/*" class="lv-upload-input">
              </div>
              <div class="lv-upload-preview" id="uploadPreview"></div>
            </div>
          </div>
        </form>
      </div>
      <div class="lv-modal-footer">
        <button class="lv-btn lv-btn-outline lv-modal-cancel">Abbrechen</button>
        <button class="lv-btn lv-btn-primary" id="saveAlbumBtn">Speichern</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const albumSearch = document.getElementById('albumSearch');
    const createAlbumBtn = document.getElementById('createAlbumBtn');
    const albumCards = document.querySelectorAll('.lv-album-card');
    const filterBtns = document.querySelectorAll('.lv-filter-btn');
    const viewAlbumBtns = document.querySelectorAll('.lv-view-album-btn');
    const editAlbumBtns = document.querySelectorAll('.lv-edit-album-btn');
    const albumViewerModal = document.getElementById('albumViewerModal');
    const albumModal = document.getElementById('albumModal');
    const albumForm = document.getElementById('albumForm');
    const saveAlbumBtn = document.getElementById('saveAlbumBtn');
    const prevPhotoBtn = document.getElementById('prevPhotoBtn');
    const nextPhotoBtn = document.getElementById('nextPhotoBtn');
    const thumbnails = document.querySelectorAll('.lv-thumbnail');
    const downloadPhotoBtn = document.getElementById('downloadPhotoBtn');
    const sharePhotoBtn = document.getElementById('sharePhotoBtn');
    const deletePhotoBtn = document.getElementById('deletePhotoBtn');
    const photoDropzone = document.getElementById('photoDropzone');
    const photoUpload = document.getElementById('photoUpload');
    const uploadPreview = document.getElementById('uploadPreview');
    const modalCloseButtons = document.querySelectorAll('.lv-modal-close, .lv-modal-cancel');
    
    // Initialize
    initSearch();
    initFilters();
    initButtons();
    initModals();
    initPhotoViewer();
    initUpload();
    
    // Functions
    function initSearch() {
      if (albumSearch) {
        albumSearch.addEventListener('input', function() {
          const searchTerm = this.value.toLowerCase();
          
          albumCards.forEach(card => {
            const albumTitle = card.querySelector('.lv-album-title').textContent.toLowerCase();
            
            if (albumTitle.includes(searchTerm)) {
              card.style.display = '';
            } else {
              card.style.display = 'none';
            }
          });
        });
      }
    }
    
    function initFilters() {
      filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          // Remove active class from all buttons
          filterBtns.forEach(b => b.classList.remove('lv-filter-active'));
          // Add active class to clicked button
          this.classList.add('lv-filter-active');
          
          const filter = this.getAttribute('data-filter');
          filterAlbums(filter);
        });
      });
    }
    
    function filterAlbums(filter) {
      albumCards.forEach(card => {
        const status = card.getAttribute('data-status');
        
        if (filter === 'all' || status === filter) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    function initButtons() {
      // Create album button
      if (createAlbumBtn) {
        createAlbumBtn.addEventListener('click', function() {
          openAlbumModal();
        });
      }
      
      // View album buttons
      viewAlbumBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const albumId = this.getAttribute('data-album-id');
          openAlbumViewerModal(albumId);
        });
      });
      
      // Edit album buttons
      editAlbumBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const albumId = this.getAttribute('data-album-id');
          openAlbumModal(albumId);
        });
      });
      
      // Photo navigation buttons
      if (prevPhotoBtn) {
        prevPhotoBtn.addEventListener('click', function() {
          navigatePhoto('prev');
        });
      }
      
      if (nextPhotoBtn) {
        nextPhotoBtn.addEventListener('click', function() {
          navigatePhoto('next');
        });
      }
      
      // Photo action buttons
      if (downloadPhotoBtn) {
        downloadPhotoBtn.addEventListener('click', function() {
          downloadCurrentPhoto();
        });
      }
      
      if (sharePhotoBtn) {
        sharePhotoBtn.addEventListener('click', function() {
          shareCurrentPhoto();
        });
      }
      
      if (deletePhotoBtn) {
        deletePhotoBtn.addEventListener('click', function() {
          deleteCurrentPhoto();
        });
      }
    }
    
    function initModals() {
      // Close modals
      modalCloseButtons.forEach(button => {
        button.addEventListener('click', function() {
          closeAllModals();
        });
      });
      
      // Save album button
      if (saveAlbumBtn) {
        saveAlbumBtn.addEventListener('click', function() {
          saveAlbum();
        });
      }
    }
    
    function initPhotoViewer() {
      // Thumbnail click
      thumbnails.forEach(thumbnail => {
        thumbnail.addEventListener('click', function() {
          const photoId = this.getAttribute('data-photo-id');
          selectPhoto(photoId);
        });
      });
      
      // Keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (albumViewerModal.classList.contains('lv-modal-open')) {
          if (e.key === 'ArrowLeft') {
            navigatePhoto('prev');
          } else if (e.key === 'ArrowRight') {
            navigatePhoto('next');
          } else if (e.key === 'Escape') {
            closeAllModals();
          }
        }
      });
    }
    
    function initUpload() {
      if (photoDropzone) {
        // Drag and drop
        photoDropzone.addEventListener('dragover', function(e) {
          e.preventDefault();
          this.classList.add('lv-upload-dropzone-active');
        });
        
        photoDropzone.addEventListener('dragleave', function() {
          this.classList.remove('lv-upload-dropzone-active');
        });
        
        photoDropzone.addEventListener('drop', function(e) {
          e.preventDefault();
          this.classList.remove('lv-upload-dropzone-active');
          
          if (e.dataTransfer.files.length > 0) {
            handleFiles(e.dataTransfer.files);
          }
        });
        
        // Click to select
        photoDropzone.addEventListener('click', function() {
          photoUpload.click();
        });
        
        // File input change
        photoUpload.addEventListener('change', function() {
          if (this.files.length > 0) {
            handleFiles(this.files);
          }
        });
      }
    }
    
    function openAlbumViewerModal(albumId) {
      // Here you would typically fetch the album data from your database
      // For now, we'll just simulate it with some dummy data based on the ID
      const albumData = {
        '1': {
          title: 'Verlobungsfotos',
          date: '01.10.2024',
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?engagement,1', caption: 'Verlobungsfotos im Park', date: '01.10.2024' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?engagement,2', caption: 'Romantischer Moment', date: '01.10.2024' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?engagement,3', caption: 'Der Antrag', date: '01.10.2024' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?engagement,4', caption: 'Der Ring', date: '01.10.2024' },
            { id: '5', url: 'https://source.unsplash.com/random/800x600/?engagement,5', caption: 'Gl√ºckliches Paar', date: '01.10.2024' },
            { id: '6', url: 'https://source.unsplash.com/random/800x600/?engagement,6', caption: 'Sonnenuntergang', date: '01.10.2024' },
            { id: '7', url: 'https://source.unsplash.com/random/800x600/?engagement,7', caption: 'Familienfoto', date: '01.10.2024' },
            { id: '8', url: 'https://source.unsplash.com/random/800x600/?engagement,8', caption: 'Feier mit Freunden', date: '01.10.2024' }
          ]
        },
        '2': {
          title: 'Pre-Wedding Shooting',
          date: '15.03.2025',
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?prewedding,1', caption: 'Pre-Wedding Shooting', date: '15.03.2025' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?prewedding,2', caption: 'Romantisches Paar', date: '15.03.2025' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?prewedding,3', caption: 'Im Wald', date: '15.03.2025' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?prewedding,4', caption: 'Am Strand', date: '15.03.2025' }
          ]
        }
      };
      
      const album = albumData[albumId];
      if (album) {
        document.getElementById('albumViewerTitle').textContent = album.title;
        
        // Generate thumbnails
        let thumbnailsHTML = '';
        album.photos.forEach((photo, index) => {
          const activeClass = index === 0 ? 'lv-thumbnail-active' : '';
          thumbnailsHTML += `
            <div class="lv-thumbnail ${activeClass}" data-photo-id="${photo.id}">
              <img src="${photo.url.replace('800x600', '100x100')}" alt="Thumbnail ${index + 1}" class="lv-thumbnail-img">
            </div>
          `;
        });
        document.getElementById('thumbnailsContainer').innerHTML = thumbnailsHTML;
        
        // Set first photo
        if (album.photos.length > 0) {
          const firstPhoto = album.photos[0];
          document.getElementById('currentPhoto').src = firstPhoto.url;
          document.getElementById('photoCaption').textContent = firstPhoto.caption;
          document.getElementById('photoDate').textContent = firstPhoto.date;
          document.getElementById('photoIndex').textContent = `1 von ${album.photos.length}`;
          document.getElementById('currentPhoto').setAttribute('data-photo-index', '0');
          document.getElementById('currentPhoto').setAttribute('data-album-id', albumId);
        }
        
        // Add click event to thumbnails
        document.querySelectorAll('#thumbnailsContainer .lv-thumbnail').forEach(thumbnail => {
          thumbnail.addEventListener('click', function() {
            const photoId = this.getAttribute('data-photo-id');
            selectPhoto(photoId, albumId);
          });
        });
        
        albumViewerModal.classList.add('lv-modal-open');
      }
    }
    
    function openAlbumModal(albumId = null) {
      // Reset form
      albumForm.reset();
      document.getElementById('albumId').value = '';
      document.getElementById('albumModalTitle').textContent = 'Album erstellen';
      document.getElementById('uploadPreview').innerHTML = '';
      
      if (albumId) {
        // Edit mode - populate form with album data
        document.getElementById('albumModalTitle').textContent = 'Album bearbeiten';
        document.getElementById('albumId').value = albumId;
        
        // Here you would typically fetch the album data from your database
        // For now, we'll just simulate it with some dummy data based on the ID
        populateAlbumForm(albumId);
      }
      
      albumModal.classList.add('lv-modal-open');
    }
    
    function closeAllModals() {
      albumViewerModal.classList.remove('lv-modal-open');
      albumModal.classList.remove('lv-modal-open');
    }
    
    function populateAlbumForm(albumId) {
      // This is a simulation - in a real app, you would fetch this data from your database
      const albumData = {
        '1': {
          title: 'Verlobungsfotos',
          description: 'Fotos von unserem Verlobungstag im Park',
          date: '2024-10-01',
          privacy: 'shared'
        },
        '2': {
          title: 'Pre-Wedding Shooting',
          description: 'Professionelles Fotoshooting vor der Hochzeit',
          date: '2025-03-15',
          privacy: 'shared'
        },
        '3': {
          title: 'Location Besichtigung',
          description: 'Fotos von der Besichtigung der Hochzeitslocation',
          date: '2024-08-20',
          privacy: 'private'
        }
      };
      
      const album = albumData[albumId];
      if (album) {
        document.getElementById('albumTitle').value = album.title;
        document.getElementById('albumDescription').value = album.description;
        document.getElementById('albumDate').value = album.date;
        document.querySelector(`input[name="albumPrivacy"][value="${album.privacy}"]`).checked = true;
      }
    }
    
    function selectPhoto(photoId, albumId) {
      // Get album ID from current photo if not provided
      if (!albumId) {
        albumId = document.getElementById('currentPhoto').getAttribute('data-album-id');
      }
      
      // This is a simulation - in a real app, you would fetch this data from your database
      const albumData = {
        '1': {
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?engagement,1', caption: 'Verlobungsfotos im Park', date: '01.10.2024' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?engagement,2', caption: 'Romantischer Moment', date: '01.10.2024' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?engagement,3', caption: 'Der Antrag', date: '01.10.2024' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?engagement,4', caption: 'Der Ring', date: '01.10.2024' },
            { id: '5', url: 'https://source.unsplash.com/random/800x600/?engagement,5', caption: 'Gl√ºckliches Paar', date: '01.10.2024' },
            { id: '6', url: 'https://source.unsplash.com/random/800x600/?engagement,6', caption: 'Sonnenuntergang', date: '01.10.2024' },
            { id: '7', url: 'https://source.unsplash.com/random/800x600/?engagement,7', caption: 'Familienfoto', date: '01.10.2024' },
            { id: '8', url: 'https://source.unsplash.com/random/800x600/?engagement,8', caption: 'Feier mit Freunden', date: '01.10.2024' }
          ]
        },
        '2': {
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?prewedding,1', caption: 'Pre-Wedding Shooting', date: '15.03.2025' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?prewedding,2', caption: 'Romantisches Paar', date: '15.03.2025' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?prewedding,3', caption: 'Im Wald', date: '15.03.2025' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?prewedding,4', caption: 'Am Strand', date: '15.03.2025' }
          ]
        }
      };
      
      const album = albumData[albumId];
      if (album) {
        // Find photo by ID
        const photoIndex = album.photos.findIndex(photo => photo.id === photoId);
        if (photoIndex !== -1) {
          const photo = album.photos[photoIndex];
          
          // Update main photo
          document.getElementById('currentPhoto').src = photo.url;
          document.getElementById('photoCaption').textContent = photo.caption;
          document.getElementById('photoDate').textContent = photo.date;
          document.getElementById('photoIndex').textContent = `${photoIndex + 1} von ${album.photos.length}`;
          document.getElementById('currentPhoto').setAttribute('data-photo-index', photoIndex);
          
          // Update active thumbnail
          document.querySelectorAll('#thumbnailsContainer .lv-thumbnail').forEach(thumbnail => {
            thumbnail.classList.remove('lv-thumbnail-active');
          });
          document.querySelector(`#thumbnailsContainer .lv-thumbnail[data-photo-id="${photoId}"]`).classList.add('lv-thumbnail-active');
        }
      }
    }
    
    function navigatePhoto(direction) {
      const currentIndex = parseInt(document.getElementById('currentPhoto').getAttribute('data-photo-index'));
      const albumId = document.getElementById('currentPhoto').getAttribute('data-album-id');
      
      // This is a simulation - in a real app, you would fetch this data from your database
      const albumData = {
        '1': {
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?engagement,1', caption: 'Verlobungsfotos im Park', date: '01.10.2024' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?engagement,2', caption: 'Romantischer Moment', date: '01.10.2024' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?engagement,3', caption: 'Der Antrag', date: '01.10.2024' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?engagement,4', caption: 'Der Ring', date: '01.10.2024' },
            { id: '5', url: 'https://source.unsplash.com/random/800x600/?engagement,5', caption: 'Gl√ºckliches Paar', date: '01.10.2024' },
            { id: '6', url: 'https://source.unsplash.com/random/800x600/?engagement,6', caption: 'Sonnenuntergang', date: '01.10.2024' },
            { id: '7', url: 'https://source.unsplash.com/random/800x600/?engagement,7', caption: 'Familienfoto', date: '01.10.2024' },
            { id: '8', url: 'https://source.unsplash.com/random/800x600/?engagement,8', caption: 'Feier mit Freunden', date: '01.10.2024' }
          ]
        },
        '2': {
          photos: [
            { id: '1', url: 'https://source.unsplash.com/random/800x600/?prewedding,1', caption: 'Pre-Wedding Shooting', date: '15.03.2025' },
            { id: '2', url: 'https://source.unsplash.com/random/800x600/?prewedding,2', caption: 'Romantisches Paar', date: '15.03.2025' },
            { id: '3', url: 'https://source.unsplash.com/random/800x600/?prewedding,3', caption: 'Im Wald', date: '15.03.2025' },
            { id: '4', url: 'https://source.unsplash.com/random/800x600/?prewedding,4', caption: 'Am Strand', date: '15.03.2025' }
          ]
        }
      };
      
      const album = albumData[albumId];
      if (album) {
        let newIndex;
        
        if (direction === 'prev') {
          newIndex = currentIndex > 0 ? currentIndex - 1 : album.photos.length - 1;
        } else {
          newIndex = currentIndex < album.photos.length - 1 ? currentIndex + 1 : 0;
        }
        
        const photo = album.photos[newIndex];
        selectPhoto(photo.id, albumId);
      }
    }
    
    function downloadCurrentPhoto() {
      const photoUrl = document.getElementById('currentPhoto').src;
      
      // Create a temporary link
      const link = document.createElement('a');
      link.href = photoUrl;
      link.download = 'photo.jpg';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      showNotification('Foto wird heruntergeladen.', 'success');
    }
    
    function shareCurrentPhoto() {
      // In a real app, you would implement sharing functionality
      // For now, we'll just show a notification
      showNotification('Teilen-Funktion noch nicht implementiert.', 'info');
    }
    
    function deleteCurrentPhoto() {
      if (confirm('Sind Sie sicher, dass Sie dieses Foto l√∂schen m√∂chten?')) {
        const currentIndex = parseInt(document.getElementById('currentPhoto').getAttribute('data-photo-index'));
        const albumId = document.getElementById('currentPhoto').getAttribute('data-album-id');
        
        // Here you would typically delete the photo from your database
        // For now, we'll just navigate to the next photo
        navigatePhoto('next');
        
        showNotification('Foto erfolgreich gel√∂scht.', 'success');
      }
    }
    
    function handleFiles(files) {
      uploadPreview.innerHTML = '';
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        
        // Check if file is an image
        if (!file.type.startsWith('image/')) {
          continue;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          const previewItem = document.createElement('div');
          previewItem.className = 'lv-upload-preview-item';
          
          const previewImg = document.createElement('img');
          previewImg.src = e.target.result;
          previewImg.className = 'lv-upload-preview-img';
          
          const previewInfo = document.createElement('div');
          previewInfo.className = 'lv-upload-preview-info';
          previewInfo.innerHTML = `
            <div class="lv-upload-preview-name">${file.name}</div>
            <div class="lv-upload-preview-size">${formatFileSize(file.size)}</div>
          `;
          
          const removeBtn = document.createElement('button');
          removeBtn.className = 'lv-upload-preview-remove';
          removeBtn.innerHTML = '&times;';
          removeBtn.addEventListener('click', function() {
            previewItem.remove();
          });
          
          previewItem.appendChild(previewImg);
          previewItem.appendChild(previewInfo);
          previewItem.appendChild(removeBtn);
          
          uploadPreview.appendChild(previewItem);
        };
        
        reader.readAsDataURL(file);
      }
    }
    
    function saveAlbum() {
      // Get form values
      const albumId = document.getElementById('albumId').value;
      const title = document.getElementById('albumTitle').value;
      
      // Validate required fields
      if (!title) {
        alert('Bitte geben Sie einen Albumtitel ein.');
        return;
      }
      
      // Here you would typically save the album data to your database
      // For now, we'll just close the modal and simulate a success message
      closeAllModals();
      
      // Show success message
      const message = albumId ? 'Album erfolgreich aktualisiert.' : 'Album erfolgreich erstellt.';
      showNotification(message, 'success');
      
      // In a real app, you would refresh the album list or update the specific card
    }
    
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    function showNotification(message, type) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `lv-notification lv-notification-${type}`;
      notification.textContent = message;
      
      // Add to document
      document.body.appendChild(notification);
      
      // Show notification
      setTimeout(() => {
        notification.classList.add('lv-notification-show');
      }, 10);
      
      // Hide and remove after 3 seconds
      setTimeout(() => {
        notification.classList.remove('lv-notification-show');
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }
  });
</script>
